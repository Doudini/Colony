[gd_scene load_steps=17 format=3 uid="uid://b16oqxjwwn8o"]

[ext_resource type="Script" uid="uid://uyml78vfo4qg" path="res://scripts/planet_surface.gd" id="1"]
[ext_resource type="Script" uid="uid://bg56vuqy6ihdv" path="res://scripts/isometric_camera.gd" id="2"]
[ext_resource type="Script" uid="uid://745kscm3s30p" path="res://scripts/tile_grid.gd" id="3"]
[ext_resource type="Script" uid="uid://ettjpehl4bl" path="res://scripts/building_manager.gd" id="4"]
[ext_resource type="Texture2D" uid="uid://d0wrm4hrluowi" path="res://tex/terrain_tileset_v4.png" id="4_5i7v8"]
[ext_resource type="Script" uid="uid://smrqwv25bkk8" path="res://scripts/clean_modern_ui.gd" id="5"]
[ext_resource type="Script" uid="uid://bryxgcbgep5fn" path="res://scripts/debug_overlay.gd" id="6"]
[ext_resource type="Script" uid="uid://dnbjqnnwc1h04" path="res://scripts/hover_detector.gd" id="7"]
[ext_resource type="Script" uid="uid://dabr368pwg3pq" path="res://scripts/building_tooltip.gd" id="8"]
[ext_resource type="Script" uid="uid://c7uhttbrjwq57" path="res://scripts/upkeep_manager.gd" id="9"]
[ext_resource type="Script" uid="uid://ckb50g4i3ardu" path="res://scripts/resource_tracker.gd" id="10"]
[ext_resource type="Script" uid="uid://b74tov6tey0pm" path="res://scripts/building_control.gd" id="11"]
[ext_resource type="Script" uid="uid://4cbukudxqbix" path="res://scripts/grid_overlay.gd" id="13_5i7v8"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_1"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_1"]
sky_material = SubResource("ProceduralSkyMaterial_1")

[sub_resource type="Environment" id="Environment_1"]
background_mode = 2
sky = SubResource("Sky_1")
ambient_light_source = 3

[node name="PlanetSurface" type="Node3D"]
script = ExtResource("1")

[node name="IsometricCamera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.707107, 0.707107, 0, -0.707107, 0.707107, 0, 30, 30)
fov = 50.0
script = ExtResource("2")

[node name="TileGrid" type="Node3D" parent="."]
script = ExtResource("3")
terrain_atlas = ExtResource("4_5i7v8")

[node name="BuildingManager" type="Node3D" parent="."]
script = ExtResource("4")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, -0.75, 0.433013, 0, 20, 0)
shadow_enabled = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_1")

[node name="HoverDetector" type="Node" parent="."]
script = ExtResource("7")

[node name="UpkeepManager" type="Node" parent="."]
script = ExtResource("9")

[node name="ResourceTracker" type="Node" parent="."]
script = ExtResource("10")

[node name="BuildingControl" type="Node" parent="."]
script = ExtResource("11")

[node name="UI" type="Control" parent="."]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1
script = ExtResource("5")

[node name="DebugOverlay" type="CanvasLayer" parent="."]
layer = 2
script = ExtResource("6")

[node name="Panel" type="PanelContainer" parent="DebugOverlay"]
offset_left = 1050.0
offset_top = 10.0
offset_right = 1270.0
offset_bottom = 200.0

[node name="MarginContainer" type="MarginContainer" parent="DebugOverlay/Panel"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBoxContainer" type="VBoxContainer" parent="DebugOverlay/Panel/MarginContainer"]
layout_mode = 2

[node name="Title" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "=== DEBUG INFO ==="

[node name="TimeLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Time: 00:00"

[node name="FPSLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "FPS: 60"

[node name="CameraLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Cam: (0, 0, 0)"

[node name="HSeparator" type="HSeparator" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="TileLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Tile: [0, 0]"

[node name="TypeLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Type: ground"

[node name="ResourceLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Resource: None"

[node name="BuildingLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Building: None"

[node name="OccupiedLabel" type="Label" parent="DebugOverlay/Panel/MarginContainer/VBoxContainer"]
layout_mode = 2
text = "Occupied: No"

[node name="TooltipLayer" type="CanvasLayer" parent="."]
layer = 3

[node name="BuildingTooltip" type="PanelContainer" parent="TooltipLayer"]
offset_right = 300.0
offset_bottom = 200.0
script = ExtResource("8")

[node name="MarginContainer" type="MarginContainer" parent="TooltipLayer/BuildingTooltip"]
layout_mode = 2
theme_override_constants/margin_left = 10
theme_override_constants/margin_top = 10
theme_override_constants/margin_right = 10
theme_override_constants/margin_bottom = 10

[node name="VBox" type="VBoxContainer" parent="TooltipLayer/BuildingTooltip/MarginContainer"]
layout_mode = 2

[node name="Title" type="Label" parent="TooltipLayer/BuildingTooltip/MarginContainer/VBox"]
layout_mode = 2
text = "BUILDING NAME"
horizontal_alignment = 1

[node name="HSeparator" type="HSeparator" parent="TooltipLayer/BuildingTooltip/MarginContainer/VBox"]
layout_mode = 2

[node name="Status" type="Label" parent="TooltipLayer/BuildingTooltip/MarginContainer/VBox"]
layout_mode = 2
text = "Status: Active"

[node name="Consumes" type="Label" parent="TooltipLayer/BuildingTooltip/MarginContainer/VBox"]
layout_mode = 2
text = "Consumes:
- Resource: Amount"

[node name="Produces" type="Label" parent="TooltipLayer/BuildingTooltip/MarginContainer/VBox"]
layout_mode = 2
text = "Produces:
+ Resource: Amount"

[node name="Upkeep" type="Label" parent="TooltipLayer/BuildingTooltip/MarginContainer/VBox"]
layout_mode = 2
text = "Upkeep:
- Energy: 1/min"

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.7071068, 0.7071068, 0, -0.7071068, 0.7071068, 0, 30, 30)
skeleton = NodePath("../IsometricCamera")
script = ExtResource("13_5i7v8")
